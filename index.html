
<!DOCTYPE html>
<html>
<head>
    <title>Home Repair Estimator & Timer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        h1 { color: #2c3e50; }
        .container { max-width: 600px; margin: auto; }
        label, input { display: block; width: 100%; margin-bottom: 10px; }
        input { padding: 10px; border: 1px solid #ccc; border-radius: 5px; }
        button { padding: 10px 15px; margin-right: 10px; background: #2c3e50; color: white; border: none; border-radius: 5px; }
        #log { margin-top: 20px; }
        .entry { border-bottom: 1px solid #ddd; padding: 10px 0; }
    </style>
</head>
<body onload="loadLog()">
    <div class="container">
        <h1>Home Repair Estimator + Task Timer</h1>

        <label for="task">Task Description</label>
        <input type="text" id="task" placeholder="e.g., Install footer">

        <label for="estimate">Estimated Cost</label>
        <input type="number" id="estimate" placeholder="$">

        <button onclick="submitEstimate()">Submit</button>

        <hr>

        <h2>Task Timer</h2>
        <button onclick="startTimer()">Start</button>
        <button onclick="stopTimer()">Stop</button>
        <div id="timerDisplay">Time Worked: 0s</div>

        <h2>Task Log</h2>
        <div id="log"></div>
    </div>

    <script>
        let startTime = null;
        let timerInterval = null;
        let currentTask = null;

        function submitEstimate() {
            const taskDescription = document.getElementById('task').value;
            const estimate = document.getElementById('estimate').value;
            if (!taskDescription || !estimate) {
                alert('Please enter a task and an estimate.');
                return;
            }

            currentTask = { description: taskDescription, cost: estimate, timeWorked: 0 };
            alert("Task Created: " + taskDescription + " for $" + estimate);
        }

        function startTimer() {
            if (!currentTask) {
                alert('Please create a task first.');
                return;
            }
            if (timerInterval) return;
            startTime = Date.now();
            timerInterval = setInterval(updateTimer, 1000);
        }

        function stopTimer() {
            if (!timerInterval) return;
            clearInterval(timerInterval);
            timerInterval = null;

            const duration = Math.floor((Date.now() - startTime) / 1000);
            currentTask.timeWorked = duration;
            logTask(currentTask);
            startTime = null;
            document.getElementById("timerDisplay").innerText = "Time Worked: 0s";
        }

        function updateTimer() {
            const seconds = Math.floor((Date.now() - startTime) / 1000);
            document.getElementById("timerDisplay").innerText = "Time Worked: " + seconds + "s";
        }

        function logTask(task) {
            const entryHTML = `<div class="entry"><strong>${task.description}</strong><br>Estimated Cost: $${task.cost}<br>Time worked: ${task.timeWorked} seconds</div>`;
            document.getElementById("log").innerHTML += entryHTML;

            let savedLogs = JSON.parse(localStorage.getItem("taskLogs")) || [];
            savedLogs.push(task);
            localStorage.setItem("taskLogs", JSON.stringify(savedLogs));
        }

        function loadLog() {
            const savedLogs = JSON.parse(localStorage.getItem("taskLogs")) || [];
            const logDiv = document.getElementById("log");
            savedLogs.forEach(task => {
                const entryHTML = `<div class="entry"><strong>${task.description}</strong><br>Estimated Cost: $${task.cost}<br>Time worked: ${task.timeWorked} seconds</div>`;
                logDiv.innerHTML += entryHTML;
            });
        }
    </script>
</body>
</html>
